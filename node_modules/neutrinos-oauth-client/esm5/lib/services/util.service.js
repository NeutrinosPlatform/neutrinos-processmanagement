/**
 * @fileoverview added by tsickle
 * Generated from: lib/services/util.service.ts
 * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
import { Injectable, isDevMode } from '@angular/core';
import * as i0 from "@angular/core";
var UtilService = /** @class */ (function () {
    function UtilService() {
        this.platformType = this.checkPlatformType();
        this.getEnvironment();
    }
    /**
     * Returns 'mobile' or 'browser' based on the platform
     */
    /**
     * Returns 'mobile' or 'browser' based on the platform
     * @return {?}
     */
    UtilService.prototype.getPlatformType = /**
     * Returns 'mobile' or 'browser' based on the platform
     * @return {?}
     */
    function () {
        return this.platformType;
    };
    /**
     * Returns env from neutrinos seed app
     */
    /**
     * Returns env from neutrinos seed app
     * @private
     * @return {?}
     */
    UtilService.prototype.getEnvironment = /**
     * Returns env from neutrinos seed app
     * @private
     * @return {?}
     */
    function () {
        if (window['neutrinos'] && window['neutrinos']['environments'] && window['neutrinos']['environments']['properties']) {
            // Break the refernce
            this.environment = JSON.parse(JSON.stringify(window['neutrinos']['environments']['properties']));
            // Append the url with / if ssdUrl does not end with /
            if (this.environment['ssdURL']) {
                this.environment['ssdURL'] = this.environment['ssdURL'].endsWith('/') ? this.environment['ssdURL'] :
                    (this.environment['ssdURL'] + '/');
            }
            return;
        }
        /*For dev env only */
        this.environment = {
            ssdURL: 'http://localhost:8081/api/',
            useDefaultExceptionUI: true,
            isIDSEnabled: false,
            webAppMountpoint: '',
            production: true
        };
    };
    /**
     * Returns 'mobile' or 'browser' based on the platform
     */
    /**
     * Returns 'mobile' or 'browser' based on the platform
     * @private
     * @return {?}
     */
    UtilService.prototype.checkPlatformType = /**
     * Returns 'mobile' or 'browser' based on the platform
     * @private
     * @return {?}
     */
    function () {
        // tslint:disable-next-line: no-string-literal
        if (window['device'] && (window['device']['platform'] !== 'browser' || window['device']['platform'] !== 'Browser')) {
            return 'mobile';
            // tslint:disable-next-line: no-string-literal
        }
        else if (window['device'] && (window['device']['platform'] === 'browser' || window['device']['platform'] === 'Browser')) {
            return 'cordova_browser';
        }
        else {
            return 'browser';
        }
    };
    /*URL helper methods */
    /*URL helper methods */
    /**
     * @return {?}
     */
    UtilService.prototype.getBaseLoginPath = /*URL helper methods */
    /**
     * @return {?}
     */
    function () {
        return this.environment.ssdURL + "login";
    };
    /**
     * @param {?} redirectTo
     * @return {?}
     */
    UtilService.prototype.getWebLoginUrl = /**
     * @param {?} redirectTo
     * @return {?}
     */
    function (redirectTo) {
        redirectTo = this.calcRedirectUrl(redirectTo);
        return this.getBaseLoginPath() + "?redirectTo=" + redirectTo;
    };
    /**
     * @return {?}
     */
    UtilService.prototype.getMobileLoginUrl = /**
     * @return {?}
     */
    function () {
        return this.getBaseLoginPath() + "?isMobile=true";
    };
    /**
     * @param {?} redirectTo
     * @return {?}
     */
    UtilService.prototype.getWebLogoutUrl = /**
     * @param {?} redirectTo
     * @return {?}
     */
    function (redirectTo) {
        redirectTo = this.calcRedirectUrl(redirectTo);
        return this.environment.ssdURL + "logout?redirectTo=" + redirectTo;
    };
    /**
     * @return {?}
     */
    UtilService.prototype.getMobileLogoutUrl = /**
     * @return {?}
     */
    function () {
        return this.environment.ssdURL + "logout?isMobile=true";
    };
    /**
     * @return {?}
     */
    UtilService.prototype.getUserInfoUrl = /**
     * @return {?}
     */
    function () {
        return this.environment.ssdURL + "user/info";
    };
    /**
     * @return {?}
     */
    UtilService.prototype.getSSDBasePath = /**
     * @return {?}
     */
    function () {
        return "" + this.environment.ssdURL;
    };
    /**
     *  Returns a absoulte url for the urlPath
     * @param urlPath - path relative to the current host
     */
    /**
     *  Returns a absoulte url for the urlPath
     * @private
     * @param {?} urlPath - path relative to the current host
     * @return {?}
     */
    UtilService.prototype.calcRedirectUrl = /**
     *  Returns a absoulte url for the urlPath
     * @private
     * @param {?} urlPath - path relative to the current host
     * @return {?}
     */
    function (urlPath) {
        if (urlPath) {
            /** @type {?} */
            var host = new URL(window.location.href).origin;
            if (!isDevMode()) {
                // Append `webAppMountpoint` to host
                host = (this.environment.webAppMountpoint !== '' && this.environment.webAppMountpoint !== '/')
                    ? new URL(this.environment.webAppMountpoint, host).href : host;
                // Get user redirect path with `webAppMountpoint`
                /** @type {?} */
                var mountPointWithRedirect = new URL(urlPath, host).pathname;
                return host + mountPointWithRedirect;
            }
            else {
                return new URL(urlPath, host);
            }
        }
        else {
            return window.location.href;
        }
    };
    /**
     *
     * @param property - environment property key
     */
    /**
     *
     * @param {?} property - environment property key
     * @return {?}
     */
    UtilService.prototype.getEnvValue = /**
     *
     * @param {?} property - environment property key
     * @return {?}
     */
    function (property) {
        return this.environment[property];
    };
    UtilService.decorators = [
        { type: Injectable, args: [{
                    providedIn: 'root'
                },] }
    ];
    /** @nocollapse */
    UtilService.ctorParameters = function () { return []; };
    /** @nocollapse */ UtilService.ɵprov = i0.ɵɵdefineInjectable({ factory: function UtilService_Factory() { return new UtilService(); }, token: UtilService, providedIn: "root" });
    return UtilService;
}());
export { UtilService };
if (false) {
    /**
     * @type {?}
     * @private
     */
    UtilService.prototype.platformType;
    /**
     * @type {?}
     * @private
     */
    UtilService.prototype.environment;
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoidXRpbC5zZXJ2aWNlLmpzIiwic291cmNlUm9vdCI6Im5nOi8vbmV1dHJpbm9zLW9hdXRoLWNsaWVudC8iLCJzb3VyY2VzIjpbImxpYi9zZXJ2aWNlcy91dGlsLnNlcnZpY2UudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7Ozs7QUFBQSxPQUFPLEVBQUUsVUFBVSxFQUFFLFNBQVMsRUFBRSxNQUFNLGVBQWUsQ0FBQzs7QUFFdEQ7SUFPRTtRQUNFLElBQUksQ0FBQyxZQUFZLEdBQUcsSUFBSSxDQUFDLGlCQUFpQixFQUFFLENBQUM7UUFDN0MsSUFBSSxDQUFDLGNBQWMsRUFBRSxDQUFDO0lBQ3hCLENBQUM7SUFFRDs7T0FFRzs7Ozs7SUFDSSxxQ0FBZTs7OztJQUF0QjtRQUNFLE9BQU8sSUFBSSxDQUFDLFlBQVksQ0FBQztJQUMzQixDQUFDO0lBR0Q7O09BRUc7Ozs7OztJQUNLLG9DQUFjOzs7OztJQUF0QjtRQUNFLElBQUksTUFBTSxDQUFDLFdBQVcsQ0FBQyxJQUFJLE1BQU0sQ0FBQyxXQUFXLENBQUMsQ0FBQyxjQUFjLENBQUMsSUFBSSxNQUFNLENBQUMsV0FBVyxDQUFDLENBQUMsY0FBYyxDQUFDLENBQUMsWUFBWSxDQUFDLEVBQUU7WUFDbkgscUJBQXFCO1lBQ3JCLElBQUksQ0FBQyxXQUFXLEdBQUcsSUFBSSxDQUFDLEtBQUssQ0FBQyxJQUFJLENBQUMsU0FBUyxDQUFDLE1BQU0sQ0FBQyxXQUFXLENBQUMsQ0FBQyxjQUFjLENBQUMsQ0FBQyxZQUFZLENBQUMsQ0FBQyxDQUFDLENBQUM7WUFDakcsc0RBQXNEO1lBQ3RELElBQUksSUFBSSxDQUFDLFdBQVcsQ0FBQyxRQUFRLENBQUMsRUFBRTtnQkFDOUIsSUFBSSxDQUFDLFdBQVcsQ0FBQyxRQUFRLENBQUMsR0FBRyxJQUFJLENBQUMsV0FBVyxDQUFDLFFBQVEsQ0FBQyxDQUFDLFFBQVEsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLFdBQVcsQ0FBQyxRQUFRLENBQUMsQ0FB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QUFDLENBQUMsSUFBSSxDQUFDOzs7b0JBRTNELHNCQUFzQixHQUFHLElBQUksR0FBRyxDQUFDLE9BQU8sRUFBRSxJQUFJLENBQUMsQ0FBQyxRQUFRO2dCQUM5RCxPQUFPLElBQUksR0FBRyxzQkFBc0IsQ0FBQzthQUN0QztpQkFBTTtnQkFDTCxPQUFPLElBQUksR0FBRyxDQUFDLE9BQU8sRUFBRSxJQUFJLENBQUMsQ0FBQzthQUMvQjtTQUNGO2FBQU07WUFDTCxPQUFPLE1BQU0sQ0FBQyxRQUFRLENBQUMsSUFBSSxDQUFDO1NBQzdCO0lBRUgsQ0FBQztJQUVEOzs7T0FHRzs7Ozs7O0lBQ0gsaUNBQVc7Ozs7O0lBQVgsVUFBWSxRQUFRO1FBQ2xCLE9BQU8sSUFBSSxDQUFDLFdBQVcsQ0FBQyxRQUFRLENBQUMsQ0FBQztJQUNwQyxDQUFDOztnQkF4SEYsVUFBVSxTQUFDO29CQUNWLFVBQVUsRUFBRSxNQUFNO2lCQUNuQjs7Ozs7c0JBSkQ7Q0E0SEMsQUExSEQsSUEwSEM7U0F2SFksV0FBVzs7Ozs7O0lBQ3RCLG1DQUE2Qjs7Ozs7SUFDN0Isa0NBQW9CIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgSW5qZWN0YWJsZSwgaXNEZXZNb2RlIH0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XHJcblxyXG5ASW5qZWN0YWJsZSh7XHJcbiAgcHJvdmlkZWRJbjogJ3Jvb3QnXHJcbn0pXHJcbmV4cG9ydCBjbGFzcyBVdGlsU2VydmljZSB7XHJcbiAgcHJpdmF0ZSBwbGF0Zm9ybVR5cGU6IHN0cmluZztcclxuICBwcml2YXRlIGVudmlyb25tZW50O1xyXG5cclxuICBjb25zdHJ1Y3RvcigpIHtcclxuICAgIHRoaXMucGxhdGZvcm1UeXBlID0gdGhpcy5jaGVja1BsYXRmb3JtVHlwZSgpO1xyXG4gICAgdGhpcy5nZXRFbnZpcm9ubWVudCgpO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogUmV0dXJucyAnbW9iaWxlJyBvciAnYnJvd3NlcicgYmFzZWQgb24gdGhlIHBsYXRmb3JtXHJcbiAgICovXHJcbiAgcHVibGljIGdldFBsYXRmb3JtVHlwZSgpOiBzdHJpbmcge1xyXG4gICAgcmV0dXJuIHRoaXMucGxhdGZvcm1UeXBlO1xyXG4gIH1cclxuXHJcblxyXG4gIC8qKlxyXG4gICAqIFJldHVybnMgZW52IGZyb20gbmV1dHJpbm9zIHNlZWQgYXBwXHJcbiAgICovXHJcbiAgcHJpdmF0ZSBnZXRFbnZpcm9ubWVudCgpIHtcclxuICAgIGlmICh3aW5kb3dbJ25ldXRyaW5vcyddICYmIHdpbmRvd1snbmV1dHJpbm9zJ11bJ2Vudmlyb25tZW50cyddICYmIHdpbmRvd1snbmV1dHJpbm9zJ11bJ2Vudmlyb25tZW50cyddWydwcm9wZXJ0aWVzJ10pIHtcclxuICAgICAgLy8gQnJlYWsgdGhlIHJlZmVybmNlXHJcbiAgICAgIHRoaXMuZW52aXJvbm1lbnQgPSBKU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KHdpbmRvd1snbmV1dHJpbm9zJ11bJ2Vudmlyb25tZW50cyddWydwcm9wZXJ0aWVzJ10pKTtcclxuICAgICAgLy8gQXBwZW5kIHRoZSB1cmwgd2l0aCAvIGlmIHNzZFVybCBkb2VzIG5vdCBlbmQgd2l0aCAvXHJcbiAgICAgIGlmICh0aGlzLmVudmlyb25tZW50Wydzc2RVUkwnXSkge1xyXG4gICAgICAgIHRoaXMuZW52aXJvbm1lbnRbJ3NzZFVSTCddID0gdGhpcy5lbnZpcm9ubWVudFsnc3NkVVJMJ10uZW5kc1dpdGgoJy8nKSA/IHRoaXMuZW52aXJvbm1lbnRbJ3NzZFVSTCddIDpcclxuICAgICAgICAgICh0aGlzLmVudmlyb25tZW50Wydzc2RVUkwnXSArICcvJyk7XHJcbiAgICAgIH1cclxuICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG4gICAgLypGb3IgZGV2IGVudiBvbmx5ICovXHJcbiAgICB0aGlzLmVudmlyb25tZW50ID0ge1xyXG4gICAgICBzc2RVUkw6ICdodHRwOi8vbG9jYWxob3N0OjgwODEvYXBpLycsXHJcbiAgICAgIHVzZURlZmF1bHRFeGNlcHRpb25VSTogdHJ1ZSxcclxuICAgICAgaXNJRFNFbmFibGVkOiBmYWxzZSxcclxuICAgICAgd2ViQXBwTW91bnRwb2ludDogJycsXHJcbiAgICAgIHByb2R1Y3Rpb246IHRydWVcclxuICAgIH07XHJcblxyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogUmV0dXJucyAnbW9iaWxlJyBvciAnYnJvd3NlcicgYmFzZWQgb24gdGhlIHBsYXRmb3JtXHJcbiAgICovXHJcbiAgcHJpdmF0ZSBjaGVja1BsYXRmb3JtVHlwZSgpOiBzdHJpbmcge1xyXG4gICAgLy8gdHNsaW50OmRpc2FibGUtbmV4dC1saW5lOiBuby1zdHJpbmctbGl0ZXJhbFxyXG4gICAgaWYgKHdpbmRvd1snZGV2aWNlJ10gJiYgKHdpbmRvd1snZGV2aWNlJ11bJ3BsYXRmb3JtJ10gIT09ICdicm93c2VyJyB8fCB3aW5kb3dbJ2RldmljZSddWydwbGF0Zm9ybSddICE9PSAnQnJvd3NlcicpKSB7XHJcbiAgICAgIHJldHVybiAnbW9iaWxlJztcclxuICAgICAgLy8gdHNsaW50OmRpc2FibGUtbmV4dC1saW5lOiBuby1zdHJpbmctbGl0ZXJhbFxyXG4gICAgfSBlbHNlIGlmICh3aW5kb3dbJ2RldmljZSddICYmICh3aW5kb3dbJ2RldmljZSddWydwbGF0Zm9ybSddID09PSAnYnJvd3NlcicgfHwgd2luZG93WydkZXZpY2UnXVsncGxhdGZvcm0nXSA9PT0gJ0Jyb3dzZXInKSkge1xyXG4gICAgICByZXR1cm4gJ2NvcmRvdmFfYnJvd3Nlcic7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICByZXR1cm4gJ2Jyb3dzZXInO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgLypVUkwgaGVscGVyIG1ldGhvZHMgKi9cclxuICBwdWJsaWMgZ2V0QmFzZUxvZ2luUGF0aCgpIHtcclxuICAgIHJldHVybiBgJHt0aGlzLmVudmlyb25tZW50LnNzZFVSTH1sb2dpbmA7XHJcbiAgfVxyXG5cclxuICBwdWJsaWMgZ2V0V2ViTG9naW5VcmwocmVkaXJlY3RUbykge1xyXG4gICAgcmVkaXJlY3RUbyA9IHRoaXMuY2FsY1JlZGlyZWN0VXJsKHJlZGlyZWN0VG8pO1xyXG4gICAgcmV0dXJuIGAke3RoaXMuZ2V0QmFzZUxvZ2luUGF0aCgpfT9yZWRpcmVjdFRvPSR7cmVkaXJlY3RUb31gO1xyXG4gIH1cclxuXHJcbiAgcHVibGljIGdldE1vYmlsZUxvZ2luVXJsKCkge1xyXG4gICAgcmV0dXJuIGAke3RoaXMuZ2V0QmFzZUxvZ2luUGF0aCgpfT9pc01vYmlsZT10cnVlYDtcclxuICB9XHJcblxyXG4gIHB1YmxpYyBnZXRXZWJMb2dvdXRVcmwocmVkaXJlY3RUbykge1xyXG4gICAgcmVkaXJlY3RUbyA9IHRoaXMuY2FsY1JlZGlyZWN0VXJsKHJlZGlyZWN0VG8pO1xyXG4gICAgcmV0dXJuIGAke3RoaXMuZW52aXJvbm1lbnQuc3NkVVJMfWxvZ291dD9yZWRpcmVjdFRvPSR7cmVkaXJlY3RUb31gO1xyXG4gIH1cclxuXHJcbiAgcHVibGljIGdldE1vYmlsZUxvZ291dFVybCgpIHtcclxuICAgIHJldHVybiBgJHt0aGlzLmVudmlyb25tZW50LnNzZFVSTH1sb2dvdXQ/aXNNb2JpbGU9dHJ1ZWA7XHJcbiAgfVxyXG5cclxuICBwdWJsaWMgZ2V0VXNlckluZm9VcmwoKSB7XHJcbiAgICByZXR1cm4gYCR7dGhpcy5lbnZpcm9ubWVudC5zc2RVUkx9dXNlci9pbmZvYDtcclxuICB9XHJcblxyXG4gIGdldFNTREJhc2VQYXRoKCkge1xyXG4gICAgcmV0dXJuIGAke3RoaXMuZW52aXJvbm1lbnQuc3NkVVJMfWA7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiAgUmV0dXJucyBhIGFic291bHRlIHVybCBmb3IgdGhlIHVybFBhdGhcclxuICAgKiBAcGFyYW0gdXJsUGF0aCAtIHBhdGggcmVsYXRpdmUgdG8gdGhlIGN1cnJlbnQgaG9zdFxyXG4gICAqL1xyXG4gIHByaXZhdGUgY2FsY1JlZGlyZWN0VXJsKHVybFBhdGgpIHtcclxuICAgIGlmICh1cmxQYXRoKSB7XHJcbiAgICAgIGxldCBob3N0OiBhbnkgPSBuZXcgVVJMKHdpbmRvdy5sb2NhdGlvbi5ocmVmKS5vcmlnaW47IC8vIGh0dHA6Ly94eXouY29tXHJcbiAgICAgIGlmICghaXNEZXZNb2RlKCkpIHtcclxuICAgICAgICAvLyBBcHBlbmQgYHdlYkFwcE1vdW50cG9pbnRgIHRvIGhvc3RcclxuICAgICAgICBob3N0ID0gKHRoaXMuZW52aXJvbm1lbnQud2ViQXBwTW91bnRwb2ludCAhPT0gJycgJiYgdGhpcy5lbnZpcm9ubWVudC53ZWJBcHBNb3VudHBvaW50ICE9PSAnLycpXHJcbiAgICAgICAgICA/IG5ldyBVUkwodGhpcy5lbnZpcm9ubWVudC53ZWJBcHBNb3VudHBvaW50LCBob3N0KS5ocmVmIDogaG9zdDtcclxuICAgICAgICAvLyBHZXQgdXNlciByZWRpcmVjdCBwYXRoIHdpdGggYHdlYkFwcE1vdW50cG9pbnRgXHJcbiAgICAgICAgY29uc3QgbW91bnRQb2ludFdpdGhSZWRpcmVjdCA9IG5ldyBVUkwodXJsUGF0aCwgaG9zdCkucGF0aG5hbWU7XHJcbiAgICAgICAgcmV0dXJuIGhvc3QgKyBtb3VudFBvaW50V2l0aFJlZGlyZWN0O1xyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIHJldHVybiBuZXcgVVJMKHVybFBhdGgsIGhvc3QpO1xyXG4gICAgICB9XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICByZXR1cm4gd2luZG93LmxvY2F0aW9uLmhyZWY7XHJcbiAgICB9XHJcblxyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICpcclxuICAgKiBAcGFyYW0gcHJvcGVydHkgLSBlbnZpcm9ubWVudCBwcm9wZXJ0eSBrZXlcclxuICAgKi9cclxuICBnZXRFbnZWYWx1ZShwcm9wZXJ0eSk6IGFueSB7XHJcbiAgICByZXR1cm4gdGhpcy5lbnZpcm9ubWVudFtwcm9wZXJ0eV07XHJcbiAgfVxyXG5cclxufVxyXG4iXX0=