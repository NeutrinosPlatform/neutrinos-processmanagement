/**
 * @fileoverview added by tsickle
 * Generated from: lib/services/util.service.ts
 * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
import { Injectable, isDevMode } from '@angular/core';
import * as i0 from "@angular/core";
export class UtilService {
    constructor() {
        this.platformType = this.checkPlatformType();
        this.getEnvironment();
    }
    /**
     * Returns 'mobile' or 'browser' based on the platform
     * @return {?}
     */
    getPlatformType() {
        return this.platformType;
    }
    /**
     * Returns env from neutrinos seed app
     * @private
     * @return {?}
     */
    getEnvironment() {
        if (window['neutrinos'] && window['neutrinos']['environments'] && window['neutrinos']['environments']['properties']) {
            // Break the refernce
            this.environment = JSON.parse(JSON.stringify(window['neutrinos']['environments']['properties']));
            // Append the url with / if ssdUrl does not end with /
            if (this.environment['ssdURL']) {
                this.environment['ssdURL'] = this.environment['ssdURL'].endsWith('/') ? this.environment['ssdURL'] :
                    (this.environment['ssdURL'] + '/');
            }
            return;
        }
        /*For dev env only */
        this.environment = {
            ssdURL: 'http://localhost:8081/api/',
            useDefaultExceptionUI: true,
            isIDSEnabled: false,
            webAppMountpoint: '',
            production: true
        };
    }
    /**
     * Returns 'mobile' or 'browser' based on the platform
     * @private
     * @return {?}
     */
    checkPlatformType() {
        // tslint:disable-next-line: no-string-literal
        if (window['device'] && (window['device']['platform'] !== 'browser' || window['device']['platform'] !== 'Browser')) {
            return 'mobile';
            // tslint:disable-next-line: no-string-literal
        }
        else if (window['device'] && (window['device']['platform'] === 'browser' || window['device']['platform'] === 'Browser')) {
            return 'cordova_browser';
        }
        else {
            return 'browser';
        }
    }
    /*URL helper methods */
    /**
     * @return {?}
     */
    getBaseLoginPath() {
        return `${this.environment.ssdURL}login`;
    }
    /**
     * @param {?} redirectTo
     * @return {?}
     */
    getWebLoginUrl(redirectTo) {
        redirectTo = this.calcRedirectUrl(redirectTo);
        return `${this.getBaseLoginPath()}?redirectTo=${redirectTo}`;
    }
    /**
     * @return {?}
     */
    getMobileLoginUrl() {
        return `${this.getBaseLoginPath()}?isMobile=true`;
    }
    /**
     * @param {?} redirectTo
     * @return {?}
     */
    getWebLogoutUrl(redirectTo) {
        redirectTo = this.calcRedirectUrl(redirectTo);
        return `${this.environment.ssdURL}logout?redirectTo=${redirectTo}`;
    }
    /**
     * @return {?}
     */
    getMobileLogoutUrl() {
        return `${this.environment.ssdURL}logout?isMobile=true`;
    }
    /**
     * @return {?}
     */
    getUserInfoUrl() {
        return `${this.environment.ssdURL}user/info`;
    }
    /**
     * @return {?}
     */
    getSSDBasePath() {
        return `${this.environment.ssdURL}`;
    }
    /**
     *  Returns a absoulte url for the urlPath
     * @private
     * @param {?} urlPath - path relative to the current host
     * @return {?}
     */
    calcRedirectUrl(urlPath) {
        if (urlPath) {
            /** @type {?} */
            let host = new URL(window.location.href).origin;
            if (!isDevMode()) {
                // Append `webAppMountpoint` to host
                host = (this.environment.webAppMountpoint !== '' && this.environment.webAppMountpoint !== '/')
                    ? new URL(this.environment.webAppMountpoint, host).href : host;
                // Get user redirect path with `webAppMountpoint`
                /** @type {?} */
                const mountPointWithRedirect = new URL(urlPath, host).pathname;
                return host + mountPointWithRedirect;
            }
            else {
                return new URL(urlPath, host);
            }
        }
        else {
            return window.location.href;
        }
    }
    /**
     *
     * @param {?} property - environment property key
     * @return {?}
     */
    getEnvValue(property) {
        return this.environment[property];
    }
}
UtilService.decorators = [
    { type: Injectable, args: [{
                providedIn: 'root'
            },] }
];
/** @nocollapse */
UtilService.ctorParameters = () => [];
/** @nocollapse */ UtilService.ɵprov = i0.ɵɵdefineInjectable({ factory: function UtilService_Factory() { return new UtilService(); }, token: UtilService, providedIn: "root" });
if (false) {
    /**
     * @type {?}
     * @private
     */
    UtilService.prototype.platformType;
    /**
     * @type {?}
     * @private
     */
    UtilService.prototype.environment;
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoidXRpbC5zZXJ2aWNlLmpzIiwic291cmNlUm9vdCI6Im5nOi8vbmV1dHJpbm9zLW9hdXRoLWNsaWVudC8iLCJzb3VyY2VzIjpbImxpYi9zZXJ2aWNlcy91dGlsLnNlcnZpY2UudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7Ozs7QUFBQSxPQUFPLEVBQUUsVUFBVSxFQUFFLFNBQVMsRUFBRSxNQUFNLGVBQWUsQ0FBQzs7QUFLdEQsTUFBTSxPQUFPLFdBQVc7SUFJdEI7UUFDRSxJQUFJLENBQUMsWUFBWSxHQUFHLElBQUksQ0FBQyxpQkFBaUIsRUFBRSxDQUFDO1FBQzdDLElBQUksQ0FBQyxjQUFjLEVBQUUsQ0FBQztJQUN4QixDQUFDOzs7OztJQUtNLGVBQWU7UUFDcEIsT0FBTyxJQUFJLENBQUMsWUFBWSxDQUFDO0lBQzNCLENBQUM7Ozs7OztJQU1PLGNBQWM7UUFDcEIsSUFBSSxNQUFNLENBQUMsV0FBVyxDQUFDLElBQUksTUFBTSxDQUFDLFdBQVcsQ0FBQyxDQUFDLGNBQWMsQ0FBQyxJQUFJLE1BQU0sQ0FBQyxXQUFXLENBQUMsQ0FBQyxjQUFjLENBQUMsQ0FBQyxZQUFZLENBQUMsRUFBRTtZQUNuSCxxQkFBcUI7WUFDckIsSUFBSSxDQUFDLFdBQVcsR0FBRyxJQUFJLENBQUMsS0FBSyxDQUFDLElBQUksQ0FBQyxTQUFTLENBQUMsTUFBTSxDQUFDLFdBQVcsQ0FBQyxDQUFDLGNBQWMsQ0FBQyxDQUFDLFlBQVksQ0FBQyxDQUFDLENBQUMsQ0FBQztZQUNqRyxzREFBc0Q7WUFDdEQsSUFBSSxJQUFJLENBQUMsV0FBVyxDQUFDLFFBQVEsQ0FBQyxFQUFFO2dCQUM5QixJQUFJLENBQUMsV0FBVyxDQUFDLFFBQVEsQ0FBQyxHQUFHLElBQUksQ0FBQyxXQUFXLENBQUMsUUFBUSxDQUFDLENBQUMsUUFBUSxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsV0FBVyxDQUFDLFFBQVEsQ0FBQyxDQUFDLENBQUM7b0JBQ2xHLENBQUMsSUFBSSxD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QUksR0FBRyxzQkFBc0IsQ0FBQzthQUN0QztpQkFBTTtnQkFDTCxPQUFPLElBQUksR0FBRyxDQUFDLE9BQU8sRUFBRSxJQUFJLENBQUMsQ0FBQzthQUMvQjtTQUNGO2FBQU07WUFDTCxPQUFPLE1BQU0sQ0FBQyxRQUFRLENBQUMsSUFBSSxDQUFDO1NBQzdCO0lBRUgsQ0FBQzs7Ozs7O0lBTUQsV0FBVyxDQUFDLFFBQVE7UUFDbEIsT0FBTyxJQUFJLENBQUMsV0FBVyxDQUFDLFFBQVEsQ0FBQyxDQUFDO0lBQ3BDLENBQUM7OztZQXhIRixVQUFVLFNBQUM7Z0JBQ1YsVUFBVSxFQUFFLE1BQU07YUFDbkI7Ozs7Ozs7Ozs7SUFFQyxtQ0FBNkI7Ozs7O0lBQzdCLGtDQUFvQiIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEluamVjdGFibGUsIGlzRGV2TW9kZSB9IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xyXG5cclxuQEluamVjdGFibGUoe1xyXG4gIHByb3ZpZGVkSW46ICdyb290J1xyXG59KVxyXG5leHBvcnQgY2xhc3MgVXRpbFNlcnZpY2Uge1xyXG4gIHByaXZhdGUgcGxhdGZvcm1UeXBlOiBzdHJpbmc7XHJcbiAgcHJpdmF0ZSBlbnZpcm9ubWVudDtcclxuXHJcbiAgY29uc3RydWN0b3IoKSB7XHJcbiAgICB0aGlzLnBsYXRmb3JtVHlwZSA9IHRoaXMuY2hlY2tQbGF0Zm9ybVR5cGUoKTtcclxuICAgIHRoaXMuZ2V0RW52aXJvbm1lbnQoKTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIFJldHVybnMgJ21vYmlsZScgb3IgJ2Jyb3dzZXInIGJhc2VkIG9uIHRoZSBwbGF0Zm9ybVxyXG4gICAqL1xyXG4gIHB1YmxpYyBnZXRQbGF0Zm9ybVR5cGUoKTogc3RyaW5nIHtcclxuICAgIHJldHVybiB0aGlzLnBsYXRmb3JtVHlwZTtcclxuICB9XHJcblxyXG5cclxuICAvKipcclxuICAgKiBSZXR1cm5zIGVudiBmcm9tIG5ldXRyaW5vcyBzZWVkIGFwcFxyXG4gICAqL1xyXG4gIHByaXZhdGUgZ2V0RW52aXJvbm1lbnQoKSB7XHJcbiAgICBpZiAod2luZG93WyduZXV0cmlub3MnXSAmJiB3aW5kb3dbJ25ldXRyaW5vcyddWydlbnZpcm9ubWVudHMnXSAmJiB3aW5kb3dbJ25ldXRyaW5vcyddWydlbnZpcm9ubWVudHMnXVsncHJvcGVydGllcyddKSB7XHJcbiAgICAgIC8vIEJyZWFrIHRoZSByZWZlcm5jZVxyXG4gICAgICB0aGlzLmVudmlyb25tZW50ID0gSlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeSh3aW5kb3dbJ25ldXRyaW5vcyddWydlbnZpcm9ubWVudHMnXVsncHJvcGVydGllcyddKSk7XHJcbiAgICAgIC8vIEFwcGVuZCB0aGUgdXJsIHdpdGggLyBpZiBzc2RVcmwgZG9lcyBub3QgZW5kIHdpdGggL1xyXG4gICAgICBpZiAodGhpcy5lbnZpcm9ubWVudFsnc3NkVVJMJ10pIHtcclxuICAgICAgICB0aGlzLmVudmlyb25tZW50Wydzc2RVUkwnXSA9IHRoaXMuZW52aXJvbm1lbnRbJ3NzZFVSTCddLmVuZHNXaXRoKCcvJykgPyB0aGlzLmVudmlyb25tZW50Wydzc2RVUkwnXSA6XHJcbiAgICAgICAgICAodGhpcy5lbnZpcm9ubWVudFsnc3NkVVJMJ10gKyAnLycpO1xyXG4gICAgICB9XHJcbiAgICAgIHJldHVybjtcclxuICAgIH1cclxuICAgIC8qRm9yIGRldiBlbnYgb25seSAqL1xyXG4gICAgdGhpcy5lbnZpcm9ubWVudCA9IHtcclxuICAgICAgc3NkVVJMOiAnaHR0cDovL2xvY2FsaG9zdDo4MDgxL2FwaS8nLFxyXG4gICAgICB1c2VEZWZhdWx0RXhjZXB0aW9uVUk6IHRydWUsXHJcbiAgICAgIGlzSURTRW5hYmxlZDogZmFsc2UsXHJcbiAgICAgIHdlYkFwcE1vdW50cG9pbnQ6ICcnLFxyXG4gICAgICBwcm9kdWN0aW9uOiB0cnVlXHJcbiAgICB9O1xyXG5cclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIFJldHVybnMgJ21vYmlsZScgb3IgJ2Jyb3dzZXInIGJhc2VkIG9uIHRoZSBwbGF0Zm9ybVxyXG4gICAqL1xyXG4gIHByaXZhdGUgY2hlY2tQbGF0Zm9ybVR5cGUoKTogc3RyaW5nIHtcclxuICAgIC8vIHRzbGludDpkaXNhYmxlLW5leHQtbGluZTogbm8tc3RyaW5nLWxpdGVyYWxcclxuICAgIGlmICh3aW5kb3dbJ2RldmljZSddICYmICh3aW5kb3dbJ2RldmljZSddWydwbGF0Zm9ybSddICE9PSAnYnJvd3NlcicgfHwgd2luZG93WydkZXZpY2UnXVsncGxhdGZvcm0nXSAhPT0gJ0Jyb3dzZXInKSkge1xyXG4gICAgICByZXR1cm4gJ21vYmlsZSc7XHJcbiAgICAgIC8vIHRzbGludDpkaXNhYmxlLW5leHQtbGluZTogbm8tc3RyaW5nLWxpdGVyYWxcclxuICAgIH0gZWxzZSBpZiAod2luZG93WydkZXZpY2UnXSAmJiAod2luZG93WydkZXZpY2UnXVsncGxhdGZvcm0nXSA9PT0gJ2Jyb3dzZXInIHx8IHdpbmRvd1snZGV2aWNlJ11bJ3BsYXRmb3JtJ10gPT09ICdCcm93c2VyJykpIHtcclxuICAgICAgcmV0dXJuICdjb3Jkb3ZhX2Jyb3dzZXInO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgcmV0dXJuICdicm93c2VyJztcclxuICAgIH1cclxuICB9XHJcblxyXG4gIC8qVVJMIGhlbHBlciBtZXRob2RzICovXHJcbiAgcHVibGljIGdldEJhc2VMb2dpblBhdGgoKSB7XHJcbiAgICByZXR1cm4gYCR7dGhpcy5lbnZpcm9ubWVudC5zc2RVUkx9bG9naW5gO1xyXG4gIH1cclxuXHJcbiAgcHVibGljIGdldFdlYkxvZ2luVXJsKHJlZGlyZWN0VG8pIHtcclxuICAgIHJlZGlyZWN0VG8gPSB0aGlzLmNhbGNSZWRpcmVjdFVybChyZWRpcmVjdFRvKTtcclxuICAgIHJldHVybiBgJHt0aGlzLmdldEJhc2VMb2dpblBhdGgoKX0/cmVkaXJlY3RUbz0ke3JlZGlyZWN0VG99YDtcclxuICB9XHJcblxyXG4gIHB1YmxpYyBnZXRNb2JpbGVMb2dpblVybCgpIHtcclxuICAgIHJldHVybiBgJHt0aGlzLmdldEJhc2VMb2dpblBhdGgoKX0/aXNNb2JpbGU9dHJ1ZWA7XHJcbiAgfVxyXG5cclxuICBwdWJsaWMgZ2V0V2ViTG9nb3V0VXJsKHJlZGlyZWN0VG8pIHtcclxuICAgIHJlZGlyZWN0VG8gPSB0aGlzLmNhbGNSZWRpcmVjdFVybChyZWRpcmVjdFRvKTtcclxuICAgIHJldHVybiBgJHt0aGlzLmVudmlyb25tZW50LnNzZFVSTH1sb2dvdXQ/cmVkaXJlY3RUbz0ke3JlZGlyZWN0VG99YDtcclxuICB9XHJcblxyXG4gIHB1YmxpYyBnZXRNb2JpbGVMb2dvdXRVcmwoKSB7XHJcbiAgICByZXR1cm4gYCR7dGhpcy5lbnZpcm9ubWVudC5zc2RVUkx9bG9nb3V0P2lzTW9iaWxlPXRydWVgO1xyXG4gIH1cclxuXHJcbiAgcHVibGljIGdldFVzZXJJbmZvVXJsKCkge1xyXG4gICAgcmV0dXJuIGAke3RoaXMuZW52aXJvbm1lbnQuc3NkVVJMfXVzZXIvaW5mb2A7XHJcbiAgfVxyXG5cclxuICBnZXRTU0RCYXNlUGF0aCgpIHtcclxuICAgIHJldHVybiBgJHt0aGlzLmVudmlyb25tZW50LnNzZFVSTH1gO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogIFJldHVybnMgYSBhYnNvdWx0ZSB1cmwgZm9yIHRoZSB1cmxQYXRoXHJcbiAgICogQHBhcmFtIHVybFBhdGggLSBwYXRoIHJlbGF0aXZlIHRvIHRoZSBjdXJyZW50IGhvc3RcclxuICAgKi9cclxuICBwcml2YXRlIGNhbGNSZWRpcmVjdFVybCh1cmxQYXRoKSB7XHJcbiAgICBpZiAodXJsUGF0aCkge1xyXG4gICAgICBsZXQgaG9zdDogYW55ID0gbmV3IFVSTCh3aW5kb3cubG9jYXRpb24uaHJlZikub3JpZ2luOyAvLyBodHRwOi8veHl6LmNvbVxyXG4gICAgICBpZiAoIWlzRGV2TW9kZSgpKSB7XHJcbiAgICAgICAgLy8gQXBwZW5kIGB3ZWJBcHBNb3VudHBvaW50YCB0byBob3N0XHJcbiAgICAgICAgaG9zdCA9ICh0aGlzLmVudmlyb25tZW50LndlYkFwcE1vdW50cG9pbnQgIT09ICcnICYmIHRoaXMuZW52aXJvbm1lbnQud2ViQXBwTW91bnRwb2ludCAhPT0gJy8nKVxyXG4gICAgICAgICAgPyBuZXcgVVJMKHRoaXMuZW52aXJvbm1lbnQud2ViQXBwTW91bnRwb2ludCwgaG9zdCkuaHJlZiA6IGhvc3Q7XHJcbiAgICAgICAgLy8gR2V0IHVzZXIgcmVkaXJlY3QgcGF0aCB3aXRoIGB3ZWJBcHBNb3VudHBvaW50YFxyXG4gICAgICAgIGNvbnN0IG1vdW50UG9pbnRXaXRoUmVkaXJlY3QgPSBuZXcgVVJMKHVybFBhdGgsIGhvc3QpLnBhdGhuYW1lO1xyXG4gICAgICAgIHJldHVybiBob3N0ICsgbW91bnRQb2ludFdpdGhSZWRpcmVjdDtcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICByZXR1cm4gbmV3IFVSTCh1cmxQYXRoLCBob3N0KTtcclxuICAgICAgfVxyXG4gICAgfSBlbHNlIHtcclxuICAgICAgcmV0dXJuIHdpbmRvdy5sb2NhdGlvbi5ocmVmO1xyXG4gICAgfVxyXG5cclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqXHJcbiAgICogQHBhcmFtIHByb3BlcnR5IC0gZW52aXJvbm1lbnQgcHJvcGVydHkga2V5XHJcbiAgICovXHJcbiAgZ2V0RW52VmFsdWUocHJvcGVydHkpOiBhbnkge1xyXG4gICAgcmV0dXJuIHRoaXMuZW52aXJvbm1lbnRbcHJvcGVydHldO1xyXG4gIH1cclxuXHJcbn1cclxuIl19